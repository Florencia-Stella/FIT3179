{
   "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
   "width":1000,
   "height":450,
   "projection":{
      "type":"equalEarth"
   },
   "data":{
      "url":"https://raw.githubusercontent.com/Florencia-Stella/FIT3179/main/data/pm25_data.csv",
      "format":{
         "type":"csv"
      }
   },
   "params":[
      {
         "name":"year_selection",
         "value":2021,
         "bind":{
            "input":"range",
            "min":1998,
            "max":2021,
            "step":1,
            "name":"Year selection"
         }
      }
   ],
   "transform":[
      {
         "lookup":"Province",
         "from":{
            "data":{
               "url":"https://raw.githubusercontent.com/Florencia-Stella/FIT3179/main/ne_10m_admin_1_states_provinces.json",
               "format":{
                  "type":"topojson",
                  "feature":"ne_10m_admin_1_states_provinces"
               }
            },
            "key":"properties.name_en",
            "fields":[
               "properties",
               "type",
               "geometry"
            ]
         }
      },
      {
         "filter":"datum.Year == year_selection"
      }
   ],
   "mark":{
      "type":"geoshape"
   },
   "encoding":{
      "color":{
         "field":"Value",
         "type":"quantitative",
         "scale":{
            "type":"threshold",
            "domain":[
               12.5,
               25,
               50
            ],
            "range":[
               "#fdbe85",
               "#fd8d3c",
               "#e6550d",
               "#a63603"
            ]
         },
         "title":"PM 2.5 (µg/m³)"
      },
      "tooltip":[
         {
            "field":"properties.name_en",
            "type":"nominal",
            "title":"Province"
         },
         {
            "field":"Value",
            "type":"quantitative",
            "title":"PM 2.5 (µg/m³)"
         }
      ],
      "stroke":{
         "value":"gray"
      }
   }
}